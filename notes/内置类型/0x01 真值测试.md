

# çœŸå€¼æµ‹è¯•

Truth Value Testing

> GitHub@[orca-j35](https://github.com/orca-j35)ï¼Œæ‰€æœ‰ç¬”è®°å‡æ‰˜ç®¡äºŽ [python_notes](https://github.com/orca-j35/python_notes) ä»“åº“ã€‚
>
> æœ¬æ–‡æ¶µç›–äº† [Truth Value Testing](https://docs.python.org/3.7/library/stdtypes.html#truth-value-testing) ä¸­çš„å…¨éƒ¨å†…å®¹ï¼Œç›¸å…³ç¬”è®°å¦‚ä¸‹ï¼š
>
> - ã€Žbool.mdã€
> - ã€Žå¸ƒå°”ç±»åž‹(bool).mdã€
> - ã€Ž3.3. Special method names.mdã€->\_\_bool\_\_
> - ã€Ž3.3. Special method names.mdã€->\_\_len\_\_

åœ¨ Python ä¸­ï¼Œå¯å¯¹ä»»ä½•å¯¹è±¡è¿›è¡ŒçœŸå€¼æµ‹è¯•ã€‚çœŸå€¼æµ‹è¯•å¯ç”¨ä½œ [`if`](https://docs.python.org/3.7/reference/compound_stmts.html#if) æˆ–[`while`](https://docs.python.org/3.7/reference/compound_stmts.html#while) çš„æ¡ä»¶ï¼Œè¿˜å¯ç”¨ä½œå¸ƒå°”è¿ç®—(*Boolean*)çš„æ“ä½œæ•°ã€‚

é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯¹è±¡çš„çœŸå€¼ä¸º `True`ï¼Œé™¤éžå­˜åœ¨ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š

- å¯¹è±¡ä¸­å®šä¹‰äº† [`__bool__()`](https://docs.python.org/3.7/reference/datamodel.html#object.__bool__) æ–¹æ³•ï¼Œå¹¶ä¸”è¯¥æ–¹æ³•è¿”å›ž `False` 
- å¯¹è±¡ä¸­å®šä¹‰äº† [`__len__()`](https://docs.python.org/3.7/reference/datamodel.html#object.__len__) æ–¹æ³•ï¼Œå¹¶ä¸”è¯¥æ–¹æ³•è¿”å›ž `0` 

å¦‚æžœåŒæ—¶å®šä¹‰äº†ä¸Šè¿°ä¸¤ç§æ–¹æ³•ï¼Œ [`__bool__()`](https://docs.python.org/3.7/reference/datamodel.html#object.__bool__) çš„ä¼˜å…ˆçº§é«˜äºŽ [`__len__()`](https://docs.python.org/3.7/reference/datamodel.html#object.__len__) ã€‚

```python
class Cls():
    def __bool__(self):
        return True

    def __len__(self):
        return 0
bool(Cls()) #> True
```

å¦‚æžœç±»å®šä¹‰ä¸­ä¸åŒ…å« [`__len__()`](https://docs.python.org/3.7/reference/datamodel.html#object.__len__) å’Œ [`__bool__()`](https://docs.python.org/3.7/reference/datamodel.html#object.__bool__)ï¼Œåˆ™è¯¥ç±»çš„æ‰€æœ‰å®žä¾‹å‡ä¸ºçœŸã€‚

```python
class Cls():pass
bool(Cls())#> True
```

ä¸‹é¢æ˜¯çœŸå€¼ä¸º false çš„å†…ç½®å¯¹è±¡ï¼š

- å¸¸é‡ `None` å’Œ `False` è¢«å®šä¹‰ä¸º false
- ä»»ä½•ç­‰äºŽ 0 çš„æ•°å€¼ç±»åž‹ï¼š`0`, `0.0`, `0j`, `Decimal(0)`, `Fraction(0, 1)`
- ç©ºåºåˆ—(*sequences*)å’Œé›†åˆ(*collections*)ï¼š `''`, `()`, `[]`, `{}`, `set()`, `range(0)`

é™¤éžå¦æœ‰è¯´æ˜Žï¼Œå¦åˆ™æ‹¥æœ‰å¸ƒå°”ç»“æžœçš„æ“ä½œæˆ–å†…ç½®å‡½æ•°æ€»ä¼šä½¿ç”¨ `0` æˆ– `False` æ¥è¡¨ç¤º å‡ï¼›ä½¿ç”¨ `1` æˆ– `True` æ¥è¡¨ç¤ºçœŸã€‚

```python
int(False) #> 0
int(True) #> 1
```

## \_\_bool\_\_

ðŸ”¨ object.`__bool__`(*self*)

è¯¥æ–¹æ³•ç”¨äºŽå®žçŽ°çœŸå€¼æµ‹è¯•å’Œå†…ç½®æ“ä½œ `bool()`ï¼Œå…¶è¿”å›žå€¼åº”æ˜¯ `False` æˆ– `True`ã€‚

```python
class Cls():
    # ä¼˜å…ˆä½¿ç”¨__bool___
    def __bool__(self):
        return True
bool(Cls()) #> True
```

å¦‚æžœå¯¹è±¡ä¸­æ²¡æœ‰å®šä¹‰ `__bool__` æ–¹æ³•ï¼Œåˆ™ä¼šè°ƒç”¨ [`__len__()`](https://docs.python.org/3.7/reference/datamodel.html#object.__len__) æ–¹æ³•ã€‚æ­¤æ—¶ï¼Œå¦‚æžœ `__len__()` çš„è¿”å›žå€¼éžé›¶ï¼Œåˆ™è®¤ä¸ºå¯¹è±¡ä¸ºçœŸã€‚

```python
class Cls():
    def __len__(self):
        return 0
bool(Cls()) #> False
```

å¦‚æžœç±»å®šä¹‰ä¸­ä¸åŒ…å« [`__len__()`](https://docs.python.org/3.7/reference/datamodel.html#object.__len__) å’Œ [`__bool__()`](https://docs.python.org/3.7/reference/datamodel.html#object.__bool__)ï¼Œåˆ™è¯¥ç±»çš„æ‰€æœ‰å®žä¾‹å‡ä¸ºçœŸã€‚

```python
class Cls():pass
bool(Cls())#> True
```